          try {
            (function(){
              var exports=exports||{};!function(t){exports.qs=t()}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){"use strict";var n=t("./stringify"),i=t("./parse");e.exports={stringify:n,parse:i}},{"./parse":2,"./stringify":3}],2:[function(t,e){"use strict";var n=t("./utils"),i=Object.prototype.hasOwnProperty,o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},r=function(t,e){for(var n={},o=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),r=0;r<o.length;++r){var s,a,u=o[r],l=u.indexOf("]=")===-1?u.indexOf("="):u.indexOf("]=")+1;l===-1?(s=e.decoder(u),a=e.strictNullHandling?null:""):(s=e.decoder(u.slice(0,l)),a=e.decoder(u.slice(l+1))),i.call(n,s)?n[s]=[].concat(n[s]).concat(a):n[s]=a}return n},s=function t(e,n,i){if(!e.length)return n;var o,r=e.shift();if("[]"===r)o=[],o=o.concat(t(e,n,i));else{o=i.plainObjects?Object.create(null):{};var s="["===r[0]&&"]"===r[r.length-1]?r.slice(1,r.length-1):r,a=parseInt(s,10);!isNaN(a)&&r!==s&&String(a)===s&&a>=0&&i.parseArrays&&a<=i.arrayLimit?(o=[],o[a]=t(e,n,i)):o[s]=t(e,n,i)}return o},a=function(t,e,n){if(t){var o=n.allowDots?t.replace(/\.([^\.\[]+)/g,"[$1]"):t,r=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,u=r.exec(o),l=[];if(u[1]){if(!n.plainObjects&&i.call(Object.prototype,u[1])&&!n.allowPrototypes)return;l.push(u[1])}for(var c=0;null!==(u=a.exec(o))&&c<n.depth;)c+=1,(n.plainObjects||!i.call(Object.prototype,u[1].replace(/\[|\]/g,""))||n.allowPrototypes)&&l.push(u[1]);return u&&l.push("["+o.slice(u.index)+"]"),s(l,e,n)}};e.exports=function(t,e){var i=e||{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!=typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.delimiter="string"==typeof i.delimiter||n.isRegExp(i.delimiter)?i.delimiter:o.delimiter,i.depth="number"==typeof i.depth?i.depth:o.depth,i.arrayLimit="number"==typeof i.arrayLimit?i.arrayLimit:o.arrayLimit,i.parseArrays=i.parseArrays!==!1,i.decoder="function"==typeof i.decoder?i.decoder:o.decoder,i.allowDots="boolean"==typeof i.allowDots?i.allowDots:o.allowDots,i.plainObjects="boolean"==typeof i.plainObjects?i.plainObjects:o.plainObjects,i.allowPrototypes="boolean"==typeof i.allowPrototypes?i.allowPrototypes:o.allowPrototypes,i.parameterLimit="number"==typeof i.parameterLimit?i.parameterLimit:o.parameterLimit,i.strictNullHandling="boolean"==typeof i.strictNullHandling?i.strictNullHandling:o.strictNullHandling,""===t||null===t||"undefined"==typeof t)return i.plainObjects?Object.create(null):{};for(var s="string"==typeof t?r(t,i):t,u=i.plainObjects?Object.create(null):{},l=Object.keys(s),c=0;c<l.length;++c){var h=l[c],p=a(h,s[h],i);u=n.merge(u,p,i)}return n.compact(u)}},{"./utils":4}],3:[function(t,e){"use strict";var n=t("./utils"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},o={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},r=function t(e,i,o,r,s,a,u,l,c){var h=e;if("function"==typeof u)h=u(i,h);else if(h instanceof Date)h=h.toISOString();else if(null===h){if(r)return a?a(i):i;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||n.isBuffer(h))return a?[a(i)+"="+a(h)]:[i+"="+String(h)];var p=[];if("undefined"==typeof h)return p;var d;if(Array.isArray(u))d=u;else{var m=Object.keys(h);d=l?m.sort(l):m}for(var f=0;f<d.length;++f){var y=d[f];s&&null===h[y]||(p=Array.isArray(h)?p.concat(t(h[y],o(i,y),o,r,s,a,u,l,c)):p.concat(t(h[y],i+(c?"."+y:"["+y+"]"),o,r,s,a,u,l,c)))}return p};e.exports=function(t,e){var n,s,a=t,u=e||{},l="undefined"==typeof u.delimiter?o.delimiter:u.delimiter,c="boolean"==typeof u.strictNullHandling?u.strictNullHandling:o.strictNullHandling,h="boolean"==typeof u.skipNulls?u.skipNulls:o.skipNulls,p="boolean"==typeof u.encode?u.encode:o.encode,d=p?"function"==typeof u.encoder?u.encoder:o.encoder:null,m="function"==typeof u.sort?u.sort:null,f="undefined"!=typeof u.allowDots&&u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&"function"!=typeof u.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof u.filter?(s=u.filter,a=s("",a)):Array.isArray(u.filter)&&(n=s=u.filter);var y=[];if("object"!=typeof a||null===a)return"";var g;g=u.arrayFormat in i?u.arrayFormat:"indices"in u?u.indices?"indices":"repeat":"indices";var v=i[g];n||(n=Object.keys(a)),m&&n.sort(m);for(var S=0;S<n.length;++S){var _=n[S];h&&null===a[_]||(y=y.concat(r(a[_],_,v,c,h,d,s,m,f)))}return y.join(l)}},{"./utils":4}],4:[function(t,e,n){"use strict";var i=function(){for(var t=new Array(256),e=0;e<256;++e)t[e]="%"+((e<16?"0":"")+e.toString(16)).toUpperCase();return t}();n.arrayToObject=function(t,e){for(var n=e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)"undefined"!=typeof t[i]&&(n[i]=t[i]);return n},n.merge=function(t,e,i){if(!e)return t;if("object"!=typeof e){if(Array.isArray(t))t.push(e);else{if("object"!=typeof t)return[t,e];t[e]=!0}return t}if("object"!=typeof t)return[t].concat(e);var o=t;return Array.isArray(t)&&!Array.isArray(e)&&(o=n.arrayToObject(t,i)),Object.keys(e).reduce(function(t,o){var r=e[o];return Object.prototype.hasOwnProperty.call(t,o)?t[o]=n.merge(t[o],r,i):t[o]=r,t},o)},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",o=0;o<e.length;++o){var r=e.charCodeAt(o);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?n+=e.charAt(o):r<128?n+=i[r]:r<2048?n+=i[192|r>>6]+i[128|63&r]:r<55296||r>=57344?n+=i[224|r>>12]+i[128|r>>6&63]+i[128|63&r]:(o+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(o)),n+=i[240|r>>18]+i[128|r>>12&63]+i[128|r>>6&63]+i[128|63&r])}return n},n.compact=function(t,e){if("object"!=typeof t||null===t)return t;var i=e||[],o=i.indexOf(t);if(o!==-1)return i[o];if(i.push(t),Array.isArray(t)){for(var r=[],s=0;s<t.length;++s)t[s]&&"object"==typeof t[s]?r.push(n.compact(t[s],i)):"undefined"!=typeof t[s]&&r.push(t[s]);return r}for(var a=Object.keys(t),u=0;u<a.length;++u){var l=a[u];t[l]=n.compact(t[l],i)}return t},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}]},{},[1])(1)}),function(t){var e=function(){"use strict";function t(e,n,i,o){function s(e,i){if(null===e)return null;if(0===i)return e;var a,h;if("object"!=typeof e)return e;if(t.__isArray(e))a=[];else if(t.__isRegExp(e))a=new RegExp(e.source,r(e)),e.lastIndex&&(a.lastIndex=e.lastIndex);else if(t.__isDate(e))a=new Date(e.getTime());else{if(c&&Buffer.isBuffer(e))return a=new Buffer(e.length),e.copy(a),a;"undefined"==typeof o?(h=Object.getPrototypeOf(e),a=Object.create(h)):(a=Object.create(o),h=o)}if(n){var p=u.indexOf(e);if(p!=-1)return l[p];u.push(e),l.push(a)}for(var d in e){var m;h&&(m=Object.getOwnPropertyDescriptor(h,d)),m&&null==m.set||(a[d]=s(e[d],i-1))}return a}var a;"object"==typeof n&&(i=n.depth,o=n.prototype,a=n.filter,n=n.circular);var u=[],l=[],c="undefined"!=typeof Buffer;return"undefined"==typeof n&&(n=!0),"undefined"==typeof i&&(i=1/0),s(e,i)}function e(t){return Object.prototype.toString.call(t)}function n(t){return"object"==typeof t&&"[object Date]"===e(t)}function i(t){return"object"==typeof t&&"[object Array]"===e(t)}function o(t){return"object"==typeof t&&"[object RegExp]"===e(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=e,t.__isDate=n,t.__isArray=i,t.__isRegExp=o,t.__getRegExpFlags=r,t}();t.clone=e}("object"==typeof exports?exports:this),function(t){exports.topdomain=t()}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";function i(t){for(var e=n.cookie,i=n.levels(t),o=0;o<i.length;++o){var r="__tld__",s=i[o],a={domain:"."+s};if(e(r,1,a),e(r))return e(r,null,a),s}return""}var o=t("component-url").parse,r=t("component-cookie");i.levels=function(t){var e=o(t).hostname,n=e.split("."),i=n[n.length-1],r=[];if(4===n.length&&i===parseInt(i,10))return r;if(n.length<=1)return r;for(var s=n.length-2;s>=0;--s)r.push(n.slice(s).join("."));return r},i.cookie=r,n=e.exports=i},{"component-cookie":2,"component-url":3}],2:[function(t,e){function n(t,e,n){n=n||{};var i=s(t)+"="+s(e);null==e&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(i+="; path="+n.path),n.domain&&(i+="; domain="+n.domain),n.expires&&(i+="; expires="+n.expires.toUTCString()),n.secure&&(i+="; secure"),document.cookie=i}function i(){var t;try{t=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return r(t)}function o(t){return i()[t]}function r(t){var e,n={},i=t.split(/ *; */);if(""==i[0])return n;for(var o=0;o<i.length;++o)e=i[o].split("="),n[a(e[0])]=a(e[1]);return n}function s(t){try{return encodeURIComponent(t)}catch(t){}}function a(t){try{return decodeURIComponent(t)}catch(t){}}e.exports=function(t,e,r){switch(arguments.length){case 3:case 2:return n(t,e,r);case 1:return o(t);default:return i()}}},{}],3:[function(t,e,n){function i(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}n.parse=function(t){var e=document.createElement("a");return e.href=t,{href:e.href,host:e.host||location.host,port:"0"===e.port||""===e.port?i(e.protocol):e.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:"/"!=e.pathname.charAt(0)?"/"+e.pathname:e.pathname,protocol:e.protocol&&":"!=e.protocol?e.protocol:location.protocol,search:e.search,query:e.search.slice(1)}},n.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")},n.isRelative=function(t){return!n.isAbsolute(t)},n.isCrossDomain=function(t){t=n.parse(t);var e=n.parse(e.href);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol}},{}]},{},[1])(1)}),function(){exports.utils={timeout:function(t,e){return setTimeout(e,t)},getCurrentTimestamp:function(){return(new Date).getTime()},sampleArray:function(t){return t[Math.floor(Math.random()*t.length)]},buildLogger:function(t,e){var n,i,o,r;i={error:1,warn:2,info:3,debug:4},o={level:e||"warn"},n=function(e,n){return o[e]=function(){var r,s;if(n<=i[o.level]){r=Array.prototype.slice.apply(arguments),i[o.level]>3&&"performance"in window&&"now"in window.performance&&r.unshift("+"+Math.round(performance.now())+"ms"),r.unshift(t);try{return"undefined"!=typeof console&&null!==console&&null!=(s=console[e])?s.apply(console,r):void 0}catch(t){return console.log(e+" "+r.join(", "))}}}};for(e in i)r=i[e],n(e,r);return o},ajaxSimpleCors:function(t){var e,n,i,o;return e=t.body||{},i=(t.method||"GET").toUpperCase(),n="GET"===i||"POST"===i?i:(e._method=i,"POST"),o=new XMLHttpRequest,o.open(n,t.url),o.withCredentials=!!t.withCredentials,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","application/json"),t.callback&&(o.onload=function(){var e;return e=JSON.parse(o.responseText),e.redirect_url?exports.utils.ajaxSimpleCors({url:e.redirect_url,callback:t.callback,withCredentials:t.withCredentials}):t.callback(e)}),"GET"!==n?o.send(exports.qs.stringify(e)):o.send()}}}.call(this),function(t){!function(e){t.Cookies=e()}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(n){function i(e,o,r){var s;if("undefined"!=typeof document){if(arguments.length>1){if(r=t({path:"/"},i.defaults,r),"number"==typeof r.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(t){}return o=n.write?n.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,r.expires&&"; expires="+r.expires.toUTCString(),r.path&&"; path="+r.path,r.domain&&"; domain="+r.domain,r.secure?"; secure":""].join("")}e||(s={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var h=u[c].split("="),p=h[0].replace(l,decodeURIComponent),d=h.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{if(d=n.read?n.read(d,p):n(d,p)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(t){}if(e===p){s=d;break}e||(s[p]=d)}catch(t){}}return s}}return i.set=i,i.get=function(t){return i(t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,n){i(e,"",t(n,{expires:-1}))},i.withConverter=e,i}return e(function(){})})}("object"==typeof exports?exports:this),!function(t,e){exports[t]=e()}("domready",function(t){function e(t){for(d=1;t=i.shift();)t()}var n,i=[],o=!1,r=document,s=r.documentElement,a=s.doScroll,u="DOMContentLoaded",l="addEventListener",c="onreadystatechange",h="readyState",p=a?/^loaded|^c/:/^loaded|c/,d=p.test(r[h]);return r[l]&&r[l](u,n=function(){r.removeEventListener(u,n,o),e()},o),a&&r.attachEvent(c,n=function(){/^c/.test(r[h])&&(r.detachEvent(c,n),e())}),t=a?function(e){self!=top?d?e():i.push(e):function(){try{s.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){d?t():i.push(t)}}),function(t){var e=0,n=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),o=setTimeout(function(){t(n+i)},i);return e=n+i,o};t.requestAnimationFrame=function(t,e){return n.call(window,t,e)}}("object"==typeof exports?exports:this),function(t){var e="addEventListener"in window?"addEventListener":"attachEvent",n=function(t){return"addEventListener"===t?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)}}(e);t.addEventListener=n}("object"==typeof exports?exports:this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.DomHelpers=function(){function e(e){this.detectOrientation=t(this.detectOrientation,this),this.calcScreenHeight=t(this.calcScreenHeight,this),this.calcWindowWidth=t(this.calcWindowWidth,this),this.calcWindowHeight=t(this.calcWindowHeight,this),this.bindEvent=t(this.bindEvent,this),this._getInitialStyleFloat=t(this._getInitialStyleFloat,this),this.translateY=t(this.translateY,this),this.transition=t(this.transition,this),this.setOpacity=t(this.setOpacity,this),this.setStyle=t(this.setStyle,this),this.getComputedStyle=t(this.getComputedStyle,this),this.config=e}return e.prototype.getComputedStyle=function(t,e){return this.config.BROWSER_SUPPORT.features.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},e.prototype.setStyle=function(t,e,n){return t.style.setProperty(e,n,"important")},e.prototype.setOpacity=function(t,e){return this.setStyle(t,"opacity",e)},e.prototype.transition=function(t,e){if(this.config.BROWSER_SUPPORT.features.transition)return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(t,"transition",e):this.setStyle(t,"transition",e.replace(/transform/g,"bottom"))},e.prototype.translateY=function(t,e){var n;return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(t,"transform","translate3d(0, "+e+"px, 0)"):(n=this._getInitialStyleFloat(t,"bottom"),"static"===this.getComputedStyle(t,"position")&&this.setStyle(t,"position","relative"),this.setStyle(t,"bottom",-e+n+"px"))},e.prototype._getInitialStyleFloat=function(t,e){var n;return(n=t.getAttribute("data-initial-"+e))?parseFloat(n,10):(n=parseFloat(this.getComputedStyle(t,e),10)||0,t.setAttribute("data-initial-"+e,n),n)},e.prototype.bindEvent=function(t,e,n){return exports.addEventListener(t,e,n)},e.prototype.calcWindowHeight=function(){return innerHeight},e.prototype.calcWindowWidth=function(){return innerWidth},e.prototype.calcScreenHeight=function(){return"portrait"===this.detectOrientation()?Math.max(screen.availHeight,screen.availWidth):Math.min(screen.availHeight,screen.availWidth)},e.prototype.detectOrientation=function(){return this.calcWindowHeight()>this.calcWindowWidth()?"portrait":"landscape"},e}()}.call(this),function(){var t=Date.now||function(){return(new Date).getTime()},e=function(e,n,i){var o,r,s,a=null,u=0;i||(i={});var l=function(){u=i.leading===!1?0:t(),a=null,s=e.apply(o,r),a||(o=r=null)};return function(){var c=t();u||i.leading!==!1||(u=c);var h=n-(c-u);return o=this,r=arguments,h<=0||h>n?(a&&(clearTimeout(a),a=null),u=c,s=e.apply(o,r),a||(o=r=null)):a||i.trailing===!1||(a=setTimeout(l,h)),s}};exports.throttle=e}(),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.TypingIndicator=function(){function e(e,n){this._bindTypingEvents=t(this._bindTypingEvents,this),this._handleWebSocketMessage=t(this._handleWebSocketMessage,this);var i;i=e.BROWSER_SUPPORT.features.webSocket&&e.BROWSER_SUPPORT.features.cors&&e.BROWSER_SUPPORT.features.json,i&&(this.$el=n.$el,this.config=e,this.pusherData=JSON.parse(this.$el.getAttribute("data-pusher")),this.ws=new WebSocket("wss://ws.pusherapp.com/app/"+this.pusherData.public_key+"?protocol=6"),this.ws.onmessage=this._handleWebSocketMessage)}return e.prototype._handleWebSocketMessage=function(t){var e;return e=JSON.parse(t.data),e.data=JSON.parse(e.data),"pusher_internal:subscription_succeeded"===e.event?this._bindTypingEvents():"pusher:connection_established"===e.event?exports.utils.ajaxSimpleCors({method:"POST",url:this.pusherData.auth_url,withCredentials:/^staging/.test(this.config.ENV),body:{survey_request_token:this.pusherData.survey_request_token,socket_id:e.data.socket_id,channel_name:this.pusherData.channel_name},callback:function(t){return function(e){var n;return n={event:"pusher:subscribe",data:{auth:e.auth,channel:t.pusherData.channel_name}},t.ws.send(JSON.stringify(n))}}(this)}):void 0},e.prototype._bindTypingEvents=function(){var t,e;return t=function(t){return function(){var e;return e={event:"client-typing",channel:t.pusherData.channel_name,data:{survey_request_token:t.pusherData.survey_request_token}},t.ws.send(JSON.stringify(e))}}(this),e=exports.throttle(t,1e3),exports.addEventListener(this.$el,"input",e)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.DisplayStrategy=function(){function e(e,n){this._setupTypingIndicator=t(this._setupTypingIndicator,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._confirmationText=t(this._confirmationText,this),this._getGroupFromScore=t(this._getGroupFromScore,this),this._clearScore=t(this._clearScore,this),this._setScore=t(this._setScore,this),this._getScore=t(this._getScore,this),this._measure=t(this._measure,this),this._injectTemplate=t(this._injectTemplate,this),this._remove=t(this._remove,this),this._getTemplate=t(this._getTemplate,this),this.toggleStateForPreview=t(this.toggleStateForPreview,this),this.config=e,this.opts=n,this.timingFactor=1,this.transitionDuration=.5*this.timingFactor,this.transitionEasing="cubic-bezier(0.32, 0.6, 0.08, 1.00)",this.dom=new exports.DomHelpers(this.config),this.state="initial"}return e.prototype.toggleStateForPreview=function(t,e,n){var i,o,r;if(null==n&&(n={}),i=t.slice(),o=this.state.slice(),i!==o)switch(this.config.LOGGER.debug("Toggling '"+o+"' -> '"+i+"'."),this.score&&(e=this.score),r=o+" -> "+i){case"toast -> question":return this._showQuestion();case"toast -> comment":return this._showComment(e);case"question -> toast":return this._hideQuestion();case"question -> comment":return this._showComment(e);case"comment -> question":return n.disableClearScoreOnHideComment||this._clearScore(),this._showQuestion();case"comment -> toast":return n.disableClearScoreOnHideComment||this._clearScore(),this._hideComment();default:return this.config.LOGGER.error("Cannot toggle '"+o+"' -> '"+i+"'.")}},e.prototype._getTemplate=function(t){var e;return e=function(e){return function(n){return e.token=n.token,t(n)}}(this),this.config.SURVEY_TEMPLATE?e(this.config.SURVEY_TEMPLATE):(this.config.TELEMETRY.instrument("GET_TEMPLATE_START",{token:this.opts.params._delighted_survey_request_token}),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.SURVEY_URL,body:this.opts.params,withCredentials:/^staging/.test(this.config.ENV),callback:function(t){return function(n){return n.abort?(t.config.TELEMETRY.instrument("GET_TEMPLATE_ABORT",{reason:n.reason}),t.config.LOGGER.warn("Survey cancelled because "+n.reason+".")):(t.config.TELEMETRY.instrument("GET_TEMPLATE_OK",{token:n.token}),e(n))}}(this)}))},e.prototype._remove=function(){if(this.$root)return exports.requestAnimationFrame(function(t){return function(){return exports.utils.timeout(1e3*t.transitionDuration,function(){return t.$root.parentNode.removeChild(t.$root),t.$root=null})}}(this))},e.prototype._injectTemplate=function(t){var e;return document.body.insertAdjacentHTML("beforeend",t.html),this.$root=document.querySelector("#delighted-web-"+t.id),this.$survey=this.$root.querySelector(".delighted-web-survey"),this.$surveyInner=this.$root.querySelector(".delighted-web-survey-inner"),this.$surveyPowered=this.$root.querySelector(".delighted-web-survey-powered"),this.$surveyClose=this.$root.querySelector(".delighted-web-survey-close"),this.$stepQuestion=this.$root.querySelector(".delighted-web-step-question"),this.$stepComment=this.$root.querySelector(".delighted-web-step-comment"),this.$stepThanks=this.$root.querySelector(".delighted-web-step-thanks"),e=this.$root.querySelector(".delighted-web-label-comment").getAttribute("data-text"),this._confirmationTextByScore=JSON.parse(e)},e.prototype._measure=function(){return this.heightSurvey=this.$survey.offsetHeight,this.heightStepQuestion=this.$stepQuestion.offsetHeight,this.heightStepComment=this.$stepComment.offsetHeight,this.heightStepThanks=this.$stepThanks.offsetHeight},e.prototype._getScore=function(t){return{text:t.innerText,number:parseInt(t.getAttribute("data-score"),10)}},e.prototype._setScore=function(t){var e,n,i,o,r;if(t){for(this.score=t,r=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),n=0,i=r.length;n<i;n++)e=r[n],t.number===this._getScore(e).number?(e.classList.remove("delighted-web-is-inactive"),e.classList.add("delighted-web-is-active")):(e.classList.add("delighted-web-is-inactive"),e.classList.remove("delighted-web-is-active"));return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.add("delighted-web-is-active"),this.$stepComment.querySelector(".delighted-web-label-comment").innerText=this._confirmationText(t),(o=this.$surveyPowered.getAttribute("data-url-tail"))?this.$surveyPowered.href=o:void 0}},e.prototype._clearScore=function(){var t,e,n,i;for(this.score=null,i=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),e=0,n=i.length;e<n;e++)t=i[e],t.classList.remove("delighted-web-is-inactive"),t.classList.remove("delighted-web-is-active");return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.remove("delighted-web-is-active")},e.prototype._getGroupFromScore=function(t){return this.config.DEFAULT_SURVEY_TYPE.groups_by_score[t.number].id_dasherized},e.prototype._confirmationText=function(t){return this._confirmationTextByScore[t.number]},e.prototype._setupEventHandlers=function(){var t,e,n,i,o;for(o=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),e=function(t){return function(e){return t.dom.bindEvent(e,"click",function(n){var i,o,r;return n.preventDefault(),o=t._getScore(e),r=e.getAttribute("data-url"),exports.utils.ajaxSimpleCors({url:r,withCredentials:/^staging/.test(t.config.ENV)}),t.$stepComment.querySelector(".delighted-web-comment").action=r,t._showComment(o),"function"==typeof(i=t.opts).onRespond&&i.onRespond({token:t.token,score:o.number}),exports.utils.timeout(t.transitionDuration,t._setupTypingIndicator)})}}(this),n=0,i=o.length;n<i;n++)t=o[n],e(t);return this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment"),"submit",function(t){return function(e){var n,i,o,r,s,a,u;for(e.preventDefault(),i=e.target,r={},u=i.querySelectorAll("input, textarea"),s=0,a=u.length;s<a;s++)n=u[s],r[n.name]=n.value;return exports.utils.ajaxSimpleCors({method:"PUT",url:i.action,body:r,withCredentials:/^staging/.test(t.config.ENV)}),t._showThanks(),"function"==typeof(o=t.opts).onComment?o.onComment({token:t.token}):void 0}}(this)),this.dom.bindEvent(this.$surveyClose,"click",function(t){return function(){return t.hide({source:"close"})}}(this))},e.prototype._setupTypingIndicator=function(){if(!this.hasSetupTypingIndicator)return this.hasSetupTypingIndicator=!0,new exports.TypingIndicator(this.config,{$el:this.$stepComment.querySelector(".delighted-web-comment-box")})},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;exports.DisplayStrategyDesktop=function(n){function i(){this._animateBtns=t(this._animateBtns,this),this._resetBtnsAnimation=t(this._resetBtnsAnimation,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._injectTemplate=t(this._injectTemplate,this),this._showThanks=t(this._showThanks,this),this._hideComment=t(this._hideComment,this),this._showComment=t(this._showComment,this),this._showQuestion=t(this._showQuestion,this),this.hide=t(this.hide,this),this.show=t(this.show,this),i.__super__.constructor.apply(this,arguments),this.autoHideDelay=2*this.timingFactor,this.opacityTransitionDuration=.15*this.timingFactor,this.opacityTransitionEasing="ease-in-out"}return e(i,n),i.prototype.show=function(){return this._getTemplate(function(t){return function(e){return t._injectTemplate(e),t._measure(),t._setupEventHandlers(),t._showQuestion()}}(this))},i.prototype.hide=function(t){return null==t&&(t={}),this.state="hidden",exports.requestAnimationFrame(function(e){return function(){return e.dom.setOpacity(e.$survey,1),exports.requestAnimationFrame(function(){var n;return e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s, opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" "+(e.transitionDuration-e.opacityTransitionDuration)/5+"s"),e.dom.setOpacity(e.$survey,0),e.dom.translateY(e.$survey,e.heightSurvey),e._remove(),"function"==typeof(n=e.opts).onHide?n.onHide({token:e.token,source:t.source}):void 0})}}(this))},i.prototype._showQuestion=function(t){return"comment"===this.state?void this._hideComment():(this.state="question",exports.requestAnimationFrame(function(e){return function(){return e.$stepQuestion.classList.add("delighted-web-is-shown"),e._measure(),e.dom.setStyle(e.$root,"visibility","visible"),e.dom.transition(e.$survey,"none"),e.dom.translateY(e.$survey,e.heightSurvey),exports.requestAnimationFrame(function(){var n;return e.opts.disableShowAnimations||e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.setOpacity(e.$survey,1),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion)),e.opts.disableShowAnimations||e._animateBtns(),"function"==typeof(n=e.opts).onShow&&n.onShow({token:e.token}),"function"==typeof t?t():void 0})}}(this)))},i.prototype._showComment=function(t){return this.state="comment",exports.requestAnimationFrame(function(e){return function(){var n;return e.$stepComment.querySelector(".delighted-web-comment-box").focus(),e._setScore(t),e.opts.disableShowCommentAnimations||e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion-e.heightStepComment),e.opts.disableShowCommentAnimations||e.dom.transition(e.$surveyPowered,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion-e.heightStepComment)),"function"==typeof(n=e.opts).onShowComment?n.onShowComment():void 0}}(this))},i.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="question",exports.requestAnimationFrame(function(t){return function(){return t.$stepComment.querySelector(".delighted-web-comment-box").blur(),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion),t.dom.transition(t.$surveyPowered,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion))}}(this)))},i.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(t){return function(){var e,n,i,o,r,s;for(t.dom.setOpacity(t.$stepQuestion,1),t.dom.setOpacity(t.$stepComment,1),t.dom.setOpacity(t.$stepThanks,0),n=t._getGroupFromScore(t.score),s=t.$stepThanks.querySelectorAll(".delighted-web-thanks"),i=0,r=s.length;i<r;i++)e=s[i],t.dom.setStyle(e,"display","none");return e=t.$stepThanks.querySelector(".delighted-web-thanks-"+n),o=e.classList.contains("delighted-web-thanks-custom"),t.dom.setStyle(e,"display","block"),t._measure(),t.dom.transition(t.$survey,"none"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion-t.heightStepComment),t.dom.transition(t.$surveyPowered,"none"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion-t.heightStepComment)),o||(t.dom.setOpacity(t.$surveyPowered,1),t.dom.setOpacity(t.$surveyClose,1)),exports.requestAnimationFrame(function(){if(t.dom.transition(t.$stepQuestion,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepQuestion,0),t.dom.transition(t.$stepComment,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepComment,0),t.dom.transition(t.$stepThanks,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepThanks,1),t.dom.translateY(t.$stepThanks,-(t.heightStepQuestion+t.heightStepComment)),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepThanks),t.dom.transition(t.$surveyPowered,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepThanks)),!o)return t.dom.transition(t.$surveyPowered,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$surveyPowered,0),t.dom.transition(t.$surveyClose,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$surveyClose,0),exports.utils.timeout(1e3*(t.transitionDuration+t.autoHideDelay),function(){return t.hide({source:"auto_hide"})})})}}(this))},i.prototype._injectTemplate=function(){return i.__super__._injectTemplate.apply(this,arguments),this.dom.setStyle(this.$survey,"display","block"),this.$root.classList.add("delighted-web-desktop")},i.prototype._setupEventHandlers=function(){var t,e;return i.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$root.querySelector(".delighted-web-label-question"),"click",function(t){return function(){return exports.requestAnimationFrame(function(){return t._resetBtnsAnimation(),exports.requestAnimationFrame(function(){return t._animateBtns()})})}}(this)),t=this.$stepComment.querySelector(".delighted-web-comment-box"),
e=this.$root.querySelector(".delighted-web-label-comment"),this.dom.bindEvent(t,"input",function(n){return function(){var i;return i=""===t.value?"block":"none",n.dom.setStyle(e,"display",i)}}(this))},i.prototype._resetBtnsAnimation=function(){var t,e,n,i,o,r,s;if(this.config.BROWSER_SUPPORT.features.animation){for(e=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),n=e.length,s=[],o=i=0,r=e.length;i<r;o=++i)t=e[o],s.push(this.dom.setStyle(t,"animation","none"));return s}},i.prototype._animateBtns=function(){var t,e,n,i,o,r,s,a,u,l;if(this.config.BROWSER_SUPPORT.features.animation){for(e=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),i=e.length,n=this.opts.buttonAnimationDirection,o=(.65*this.transitionDuration).toFixed(3),l=[],s=r=0,a=e.length;r<a;s=++r)t=e[s],u=n>0?s:i-s,l.push(this.dom.setStyle(t,"animation","delighted-web-btn-anim "+o+"s linear "+(u*o/(i-1)).toFixed(3)+"s 1 normal both"));return l}},i}(exports.DisplayStrategy)}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};t=0,e=1,n=function(){function n(){this.disengage=i(this.disengage,this),this.engage=i(this.engage,this),this.inferState=i(this.inferState,this),this.isEngaged=!1,this.originals={}}return n.prototype.inferState=function(n){return n.config.BROWSER_SUPPORT.platform.isIos&&n.windowHeight<.94*n.availHeight?t:e},n.prototype.engage=function(t){var n;if(!this.isEngaged)return n=t===e?"100px":"101vh",this.originals.bodyHeight=document.body.style.height,this.originals.bodyOverflow=document.body.style.overflow,document.body.style.height=n,document.body.style.overflow="hidden",this.originals.htmlHeight=document.documentElement.style.height,this.originals.htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.height=n,document.documentElement.style.overflow="hidden",this.originals.windowScrollX=scrollX,this.originals.windowScrollY=scrollY,window.scrollX=0,window.scrollY=0,this.isEngaged=!0},n.prototype.disengage=function(){if(this.isEngaged)return document.body.style.height=this.originals.bodyHeight,document.body.style.overflow=this.originals.bodyOverflow,document.documentElement.style.height=this.originals.htmlHeight,document.documentElement.style.overflow=this.originals.htmlOverflow,scrollTo(this.originals.windowScrollX,this.originals.windowScrollY),this.isEngaged=!1},n}(),exports.ScrollLock=new n}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;exports.DisplayStrategyTouch=function(n){function i(){this._optimizeCommentBoxHeight=t(this._optimizeCommentBoxHeight,this),this._inferScrollState=t(this._inferScrollState,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._measure=t(this._measure,this),this._injectTemplate=t(this._injectTemplate,this),this._hideToast=t(this._hideToast,this),this._showThanks=t(this._showThanks,this),this._hideComment=t(this._hideComment,this),this._showComment=t(this._showComment,this),this._hideQuestion=t(this._hideQuestion,this),this._showQuestion=t(this._showQuestion,this),this._showSurvey=t(this._showSurvey,this),this._hideSurvey=t(this._hideSurvey,this),this._showToast=t(this._showToast,this),this.hide=t(this.hide,this),this.show=t(this.show,this);var e;i.__super__.constructor.apply(this,arguments),this.autoHideDelay=1.5*this.timingFactor,(e=this.opts).offsets||(e.offsets={})}return e(i,n),i.prototype.show=function(){return this._getTemplate(function(t){return function(e){return t._injectTemplate(e),t._measure(),t._setupEventHandlers(),t._showToast()}}(this))},i.prototype.hide=function(t){return null==t&&(t={}),this.state="hidden",exports.requestAnimationFrame(function(e){return function(){var n;return e.opts.disableScrollLock||exports.ScrollLock.disengage(),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey),e._remove(),"function"==typeof(n=e.opts).onHide?n.onHide({token:e.token,source:t.source}):void 0}}(this))},i.prototype._showToast=function(){return this.state="toast",exports.requestAnimationFrame(function(t){return function(){return t.dom.setStyle(t.$root,"visibility","visible"),t.dom.translateY(t.$toast,t.heightToast),exports.requestAnimationFrame(function(){var e;return t.opts.disableShowAnimations||t.dom.transition(t.$toast,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$toast,0),"function"==typeof(e=t.opts).onShow?e.onShow({token:t.token}):void 0})}}(this))},i.prototype._hideSurvey=function(t){return window.clearTimeout(this.showSurveyTimeout),this.surveyShowing=!1,exports.requestAnimationFrame(function(e){return function(){return e.dom.setStyle(e.$toast,"display","block"),e.dom.translateY(e.$toast,0),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey),"function"==typeof t?t():void 0}}(this))},i.prototype._showSurvey=function(t){return this.surveyShowing?"function"==typeof t?t():void 0:(this.surveyShowing=!0,exports.requestAnimationFrame(function(e){return function(){var n;return n=e._inferScrollState(),e.dom.setStyle(e.$survey,"display","block"),e._measure(),e.dom.transition(e.$toast,"none"),e.dom.translateY(e.$toast,0),e.dom.transition(e.$survey,"none"),e.dom.translateY(e.$survey,e.heightSurvey),exports.requestAnimationFrame(function(){var i;return e.dom.transition(e.$toast,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$toast,e.heightToast),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,0),i=1e3*e.transitionDuration,e.showSurveyTimeout=exports.utils.timeout(i,function(){return e.opts.disableScrollLock||exports.ScrollLock.engage(n),e.dom.setStyle(e.$toast,"display","none"),"function"==typeof t?t():void 0})})}}(this)))},i.prototype._showQuestion=function(t){return this.state="question",exports.requestAnimationFrame(function(e){return function(){return e.$surveyInner.classList.add("delighted-web-is-questioning"),e.$surveyInner.classList.remove("delighted-web-is-commenting"),e.$surveyInner.classList.remove("delighted-web-is-thanking"),e.$stepQuestion.classList.add("delighted-web-is-shown"),e.$stepComment.classList.remove("delighted-web-is-shown"),e.$stepThanks.classList.remove("delighted-web-is-shown"),e.dom.setStyle(e.$stepQuestion,"display","flex"),e.dom.setStyle(e.$stepComment,"display","none"),e.dom.setStyle(e.$stepThanks,"display","none"),e._showSurvey(t)}}(this))},i.prototype._hideQuestion=function(){return"question"!==this.state?void this.config.LOGGER.error("Must be in 'question' state to hide question (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(t){return function(){return t.$surveyInner.classList.remove("delighted-web-is-questioning"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.remove("delighted-web-is-thanking"),t.$stepQuestion.classList.remove("delighted-web-is-shown"),t.$stepComment.classList.remove("delighted-web-is-shown"),t.$stepThanks.classList.remove("delighted-web-is-shown"),t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","none")}}(this)))},i.prototype._showComment=function(t){return this.state="comment",this._setScore(t),this._optimizeCommentBoxHeight(),this.dom.setStyle(this.$stepQuestion,"display","none"),this.dom.setStyle(this.$stepComment,"display","block"),this.dom.setStyle(this.$stepThanks,"display","none"),this._measure(),this.$surveyInner.classList.remove("delighted-web-is-questioning"),this.$surveyInner.classList.add("delighted-web-is-commenting"),this.$surveyInner.classList.remove("delighted-web-is-thanking"),this.$stepComment.querySelector(".delighted-web-comment-box").focus(),this._showSurvey(this.opts.onShowComment)},i.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(t){return function(){return t.$surveyInner.classList.remove("delighted-web-is-questioning"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.remove("delighted-web-is-thanking"),t.$stepQuestion.classList.remove("delighted-web-is-shown"),t.$stepComment.classList.remove("delighted-web-is-shown"),t.$stepThanks.classList.remove("delighted-web-is-shown"),t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","none")}}(this)))},i.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(t){return function(){var e,n,i,o,r,s;for(t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","flex"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.add("delighted-web-is-thanking"),n=t._getGroupFromScore(t.score),s=t.$stepThanks.querySelectorAll(".delighted-web-thanks"),i=0,r=s.length;i<r;i++)e=s[i],t.dom.setStyle(e,"display","none");if(e=t.$stepThanks.querySelector(".delighted-web-thanks-"+n),o=e.classList.contains("delighted-web-thanks-custom"),t.dom.setStyle(e,"display","block"),t._measure(),!o)return t.dom.setOpacity(t.$surveyClose,1),exports.requestAnimationFrame(function(){return t.dom.transition(t.$surveyClose,"opacity "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.setOpacity(t.$surveyClose,0),exports.utils.timeout(1e3*(t.transitionDuration+t.autoHideDelay),function(){return t.hide({source:"auto_hide"})})})}}(this))},i.prototype._hideToast=function(){return this.state="initial",exports.requestAnimationFrame(function(t){return function(){return t.dom.transition(t.$toast,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$toast,t.heightToast)}}(this))},i.prototype._injectTemplate=function(){return i.__super__._injectTemplate.apply(this,arguments),this.$toast=this.$root.querySelector(".delighted-web-toast"),this.$toastClose=this.$root.querySelector(".delighted-web-toast-close"),this.dom.setStyle(this.$toast,"display","block"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyInner,"margin-top",this.opts.offsets.top+"px"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyClose,"margin-top",this.opts.offsets.top+"px"),this.$root.classList.add("delighted-web-touch")},i.prototype._measure=function(){return i.__super__._measure.apply(this,arguments),this.widthToast=this.$toast.offsetWidth,this.widthToastClose=this.$toastClose.offsetWidth,this.heightToast=this.$toast.offsetHeight},i.prototype._setupEventHandlers=function(){return i.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$toast,"click",function(t){return function(e){var n;return t._measure(),e.clientX<t.widthToast-t.widthToastClose?t._showQuestion():(t._hideToast(),t._remove(),"function"==typeof(n=t.opts).onHide?n.onHide({token:t.token,source:"toast_close"}):void 0)}}(this)),this.dom.bindEvent(window,"orientationchange",function(t){return function(){return t._optimizeCommentBoxHeight()}}(this)),this.dom.bindEvent(window,"resize",this._optimizeCommentBoxHeight())},i.prototype._inferScrollState=function(){return exports.ScrollLock.inferState({config:this.config,windowHeight:this.dom.calcWindowHeight(),availHeight:this.dom.calcScreenHeight()})},i.prototype._optimizeCommentBoxHeight=function(){var t;return t=function(t){return function(){var e,n,i,o,r,s,a,u,l,c,h,p;return e=24,l=6,h=t.dom.calcWindowHeight(),p=t.dom.calcWindowWidth(),u=2*e,n=6*e,a=10*e,i=t.config.BROWSER_SUPPORT.platform.isIpad,o=t.config.BROWSER_SUPPORT.platform.isIphone,r=t.config.BROWSER_SUPPORT.platform.isIpod,s="portrait"===t.dom.detectOrientation(),c=i?s?Math.floor(.4*h):Math.floor(.2*h):o||r?s?Math.floor(.3*h):Math.floor(.1*h):n,c-=c%e,Math.min(a,Math.max(u,c))+2*l}}(this),this.dom.setStyle(this.$stepComment.querySelector(".delighted-web-comment-box"),"height",t()+"px")},i}(exports.DisplayStrategy)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=!1,t=function(){function t(t){this.updateSurveyTemplate=n(this.updateSurveyTemplate,this),this.toggleStateForPreview=n(this.toggleStateForPreview,this),this.displayStrategy=t}return t.prototype.toggleStateForPreview=function(t,e,n){return null==n&&(n={}),this.displayStrategy.toggleStateForPreview(t,e,n)},t.prototype.updateSurveyTemplate=function(t){return this.displayStrategy.config.SURVEY_TEMPLATE=t},t}(),exports.showSurvey=function(n,i,o){var r,s,a,u,l,c,h;return n.LOGGER.info("Survey showing."),r=null,h=function(t){var e;return e=n.PREVIEW_MODE?{displayStrategy:r}:{},"function"==typeof t?t(e):void 0},l=function(t){return n.LOGGER.info("Survey shown."),n.STATE_MANAGER.getLastSurveyedToken()!==t.token&&n.STATE_MANAGER.setLastSurveyedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),n.TELEMETRY.instrument("SURVEY_SHOWN"),e=!0,h(o.onShow)},c=function(){return n.LOGGER.debug("Survey shown comment."),n.TELEMETRY.instrument("SURVEY_SHOWN_COMMENT"),h(o.onShowComment)},u=function(t){return n.LOGGER.debug("Survey responded."),n.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),n.TELEMETRY.instrument("SURVEY_RESPONDED",{score:t.score})},s=function(){return n.LOGGER.debug("Survey commented."),n.TELEMETRY.instrument("SURVEY_COMMENTED")},a=function(t){return n.LOGGER.info("Survey hidden."),"toast_close"!==t.source&&"close"!==t.source||n.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),n.TELEMETRY.instrument("SURVEY_HIDDEN",{source:t.source}),n.TELEMETRY.flush(),e=!1,h(o.onHide)},exports.domready(function(){var h,p,d;return p={params:i,onShow:l,onShowComment:c,onRespond:u,onComment:s,onHide:a,buttonAnimationDirection:o.buttonAnimationDirection,disableShowAnimations:o.disableShowAnimations,disableShowCommentAnimations:o.disableShowCommentAnimations,disableScrollLock:o.disableScrollLock,offsets:o.offsets},d="touch"===n.FORCE_DISPLAY_STRATEGY||n.BROWSER_SUPPORT.platform.isTouch,h=d?new exports.DisplayStrategyTouch(n,p):new exports.DisplayStrategyDesktop(n,p),r=new t(h),e?n.LOGGER.info("A survey is already showing, aborting."):h.show()})}}.call(this),function(t,e){var n=t.parse,i=[1,4,5,6,7,10,11],o=function(o){var r,s,a=0;if(s=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(o)){for(var u,l=0;u=i[l];++l)s[u]=+s[u]||0;s[2]=(+s[2]||1)-1,s[3]=+s[3]||1,"Z"!==s[8]&&s[9]!==e&&(a=60*s[10]+s[11],"+"===s[9]&&(a=0-a)),r=t.UTC(s[1],s[2],s[3],s[4],s[5]+a,s[6],s[7])}else r=n?n(o):NaN;return r};exports.iso8601={parse:o}}(Date),function(){exports.generateProperties=function(t,e,n){var i,o;return o=exports.clone(e.properties||{}),i=function(e){var n,i;return i=e.timeSinceFirstSeen,n=i>1e3*t.RETURN_DELAY,t.LOGGER.debug("Returning visitor:",n,"(~"+i+" ms since first seen)"),n},null==o.Page&&(o.Page=document.title),null==o["Page URL"]&&(o["Page URL"]=location.href),null==o["Referrer URL"]&&(o["Referrer URL"]=document.referrer),null==o["User Agent"]&&(o["User Agent"]=navigator.userAgent),i(n)&&null==o["Visitor Type"]&&(o["Visitor Type"]="Returning"),t.IS_TEST&&(o._delighted_test="1"),n.token&&(o._delighted_survey_request_token=n.token),o}}.call(this),function(){exports.checkSurveyEligibility=function(t,e){var n,i,o,r,s,a,u,l,c,h,p,d,m,f,y,g,v,S;return t.TELEMETRY.instrument("CHECKING_ELIGIBILITY"),n=exports.utils.getCurrentTimestamp(),r=function(t,e){var n,i;return n=null!=t.createdAt&&exports.iso8601.parse(t.createdAt),i="number"==typeof n&&!isNaN(n),i?Math.min(n,e):e},o=function(e,n){var i,o,r,s;r=exports.generateProperties(t,e,n),o={};for(i in r)s=r[i],o[i]=s;return e.email&&(o.email=e.email),e.name&&(o.name=e.name),o},v=function(t){return Math.random()<=t.sampleFactor},s=1e3*e.initialDelay,g=e.recurringPeriod?1e3*e.recurringPeriod:t.NEVER_FUTURE_TIMESTAMP,h=1e3*e.minSurveyInterval,p=1e3*e.minTimeForDisplay,i=t.STATE_MANAGER.getSetFirstSeenTimestamp(n),a=r(e,i),l=t.STATE_MANAGER.getLastSurveyedTimestamp()||t.NEVER_PAST_TIMESTAMP,c=t.STATE_MANAGER.getLastSurveyedToken(),u=t.STATE_MANAGER.getLastRespondedTimestamp()||t.NEVER_PAST_TIMESTAMP,S=n-i,f=e.forceDisplay?n:(d=Math.max(l,a),m=l>t.NEVER_PAST_TIMESTAMP?g:s,d+m),f=Math.max(f,l+h),t.TELEMETRY.instrument("ELIGIBILITY_TIMESTAMPS",{firstSeenTimestamp:i,initialTimestamp:a,lastSurveyTimestamp:l,nextSurveyTimestamp:f}),"m5KZudle4UrncwrN"===t.WRITE_KEY&&!e.disableScrollLock&&/file/.test(location.protocol)?{isEligible:!1,reason:"configuration is unsupported"}:t.IS_TEST?{isEligible:!0,reason:"test mode is enabled",params:o(e,{timeSinceFirstSeen:S}),delay:0}:n-l<p&&u<l&&c?{isEligible:!0,isRedisplay:!0,reason:"person has an active survey (valid for another "+Math.round(Math.max(0,p-n+l)/1e3)+" seconds)",params:o(e,{timeSinceFirstSeen:S,token:c}),delay:0}:f<=n?v(e)?t.PLAN_LIMIT_EXHAUSTED?{isEligible:!1,reason:"although person is eligible, and was sampled (rate: "+100*e.sampleFactor+"%), plan survey limit is exhausted",exhausted:!0}:{isEligible:!0,reason:"person is eligible, and was sampled (rate: "+100*e.sampleFactor+"%)",params:o(e,{timeSinceFirstSeen:S}),delay:1e3*e.minTimeOnPage}:{isEligible:!1,reason:"although person is eligible, they were not sampled (rate: "+100*e.sampleFactor+"%)"}:(y=f>=t.NEVER_FUTURE_TIMESTAMP?"person has already been surveyed and recurring surveys are not configured":"person is not eligible until "+new Date(f),{isEligible:!1,reason:y})}}.call(this),function(){var t=new RegExp("bot|crawl|spider|borg|yahoo|slurp|archiver|netresearch|lycos|scooter  |altavista|teoma|oegp|charlotte|http client|htdig|ichiro|mogimogi|larbin|pompos|scrubby  |searchsight|semanticdiscovery|snappy|speedy|voila|vortex|voyager|zao|zeal|dataparksearch  |findlinks|yottaamonitor|browsermob|httpmonitor|bingpreview|pagepeeker|webthumb|url2png|zooshot  |gomeza|google sketchup|read later|pingdom|facebook|rackspace|scan|link|ezine|preview  |dig|tarantula|urllib|jakarta|wget|rget|monitor|libwww|moozilla|seer|spice|snoopy|feedfetcher  |google wireless transcoder|curl|wordpress|java|netfront|archive|xenu|feed|appmanager|covario  |perl|host|lwp|page speed|ptst|digext|nutch|sleuth|yottaamonitor","i");exports.isBot=function(e){return t.test(e)}}(),function(t,e,n){function i(t,e){return typeof t===e}function o(){var t,e,n,o,r,s,a;for(var u in g)if(g.hasOwnProperty(u)){if(t=[],e=g[u],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(o=i(e.fn,"function")?e.fn():e.fn,r=0;r<t.length;r++)s=t[r],a=s.split("."),1===a.length?S[a[0]]=o:(!S[a[0]]||S[a[0]]instanceof Boolean||(S[a[0]]=new Boolean(S[a[0]])),S[a[0]][a[1]]=o),E.push((o?"":"no-")+a.join("-"))}}function r(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):x?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function s(){var t=e.body;return t||(t=r(x?"svg":"body"),t.fake=!0),t}function a(t,n,i,o){var a,u,l,c,h="modernizr",p=r("div"),d=s();if(parseInt(i,10))for(;i--;)l=r("div"),l.id=o?o[i]:h+(i+1),p.appendChild(l);return a=r("style"),a.type="text/css",a.id="s"+h,(d.fake?d:p).appendChild(a),d.appendChild(p),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),p.id=h,d.fake&&(d.style.background="",d.style.overflow="hidden",c=w.style.overflow,w.style.overflow="hidden",w.appendChild(d)),u=n(p,t),d.fake?(d.parentNode.removeChild(d),w.style.overflow=c,w.offsetHeight):p.parentNode.removeChild(p),!!u}function u(t,e){return!!~(""+t).indexOf(e)}function l(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function c(t,e){return function(){return t.apply(e,arguments)}}function h(t,e,n){var o;for(var r in t)if(t[r]in e)return n===!1?t[r]:(o=e[t[r]],i(o,"function")?c(o,n||e):o);return!1}function p(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(e,i){var o=e.length;if("CSS"in t&&"supports"in t.CSS){for(;o--;)if(t.CSS.supports(p(e[o]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var r=[];o--;)r.push("("+p(e[o])+":"+i+")");return r=r.join(" or "),a("@supports ("+r+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return n}function m(t,e,o,s){function a(){h&&(delete D.style,delete D.modElem)}if(s=!i(s,"undefined")&&s,!i(o,"undefined")){var c=d(t,o);if(!i(c,"undefined"))return c}for(var h,p,m,f,y,g=["modernizr","tspan","samp"];!D.style&&g.length;)h=!0,D.modElem=r(g.shift()),D.style=D.modElem.style;for(m=t.length,p=0;p<m;p++)if(f=t[p],y=D.style[f],u(f,"-")&&(f=l(f)),D.style[f]!==n){if(s||i(o,"undefined"))return a(),"pfx"!=e||f;try{D.style[f]=o}catch(t){}if(D.style[f]!=y)return a(),"pfx"!=e||f}return a(),!1}function f(t,e,n,o,r){var s=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+L.join(s+" ")+s).split(" ");return i(e,"string")||i(e,"undefined")?m(a,e,o,r):(a=(t+" "+k.join(s+" ")+s).split(" "),h(a,e,n))}function y(t,e,i){return f(t,n,n,e,i)}var g=[],v={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){g.push({name:t,fn:e,options:n})},addAsyncTest:function(t){g.push({name:null,fn:t})}},S=function(){};S.prototype=v,S=new S,S.addTest("cookies",function(){try{e.cookie="cookietest=1";var t=e.cookie.indexOf("cookietest=")!=-1;return e.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(t){return!1}}),S.addTest("cors","XMLHttpRequest"in t&&"withCredentials"in new XMLHttpRequest),S.addTest("json","JSON"in t&&"parse"in JSON&&"stringify"in JSON),S.addTest("queryselector","querySelector"in e&&"querySelectorAll"in e);var _=!1;try{_="WebSocket"in t&&2===t.WebSocket.CLOSING}catch(t){}S.addTest("websockets",_);var E=[],T=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];v._prefixes=T;var w=e.documentElement,b="CSS"in t&&"supports"in t.CSS,O="supportsCSS"in t;S.addTest("supports",b||O);var x="svg"===w.nodeName.toLowerCase(),R=function(){function t(t,e){var o;return!!t&&(e&&"string"!=typeof e||(e=r(e||"div")),t="on"+t,o=t in e,!o&&i&&(e.setAttribute||(e=r("div")),e.setAttribute(t,""),o="function"==typeof e[t],e[t]!==n&&(e[t]=n),e.removeAttribute(t)),o)}var i=!("onblur"in e.documentElement);return t}();v.hasEvent=R;var A=v.testStyles=a;S.addTest("touchevents",function(){var n;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)n=!0;else{var i=["@media (",T.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");A(i,function(t){n=9===t.offsetTop})}return n}),S.addTest("oninput",function(){var n,i=r("input");if(i.setAttribute("oninput","return"),R("oninput",w)||"function"==typeof i.oninput)return!0;try{var o=e.createEvent("KeyboardEvent");n=!1;var s=function(t){n=!0,t.preventDefault(),t.stopPropagation()};o.initKeyEvent("keypress",!0,!0,t,!1,!1,!1,!1,0,"e".charCodeAt(0)),w.appendChild(i),i.addEventListener("input",s,!1),i.focus(),i.dispatchEvent(o),i.removeEventListener("input",s,!1),w.removeChild(i)}catch(t){n=!1}return n});var C="Moz O ms Webkit",L=v._config.usePrefixes?C.split(" "):[];v._cssomPrefixes=L;var k=v._config.usePrefixes?C.toLowerCase().split(" "):[];v._domPrefixes=k;var $={elem:r("modernizr")};S._q.push(function(){delete $.elem});var D={style:$.elem.style};S._q.unshift(function(){delete D.style}),v.testAllProps=f,v.testAllProps=y,S.addTest("cssanimations",y("animationName","a",!0)),S.addTest("csstransitions",y("transition","all",!0)),S.addTest("csstransforms3d",function(){var t=!!y("perspective","1px",!0),e=S._config.usePrefixes;if(t&&(!e||"webkitPerspective"in w.style)){var n,i="#modernizr{width:0;height:0}";S.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",e&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",A(i+n,function(e){t=7===e.offsetWidth&&18===e.offsetHeight})}return t}),o(),delete v.addTest,delete v.addAsyncTest;for(var I=0;I<S._q.length;I++)S._q[I]();exports.Modernizr=S}(window,document),function(){exports.detectBrowserSupport=function(){var t,e,n,i,o,r,s;return t=document.createElement("div"),e=document.createElement("textarea"),s=navigator.userAgent,i=/PhantomJS/.test(window.navigator.userAgent),n={cookies:exports.Modernizr.cookies,animation:exports.Modernizr.cssanimations,transition:exports.Modernizr.csstransitions,transform:exports.Modernizr.csstransforms3d,getComputedStyle:!!("getComputedStyle"in window),cors:exports.Modernizr.cors,json:exports.Modernizr.json,webSocket:exports.Modernizr.websockets,inputEvent:exports.Modernizr.oninput||!!("oninput"in e),querySelector:exports.Modernizr.queryselector},r={isBot:exports.isBot(s),isTouch:exports.Modernizr.touchevents&&!i,isIos:/(iPad|iPod|iPhone)/.test(s),isIpad:/iPad/.test(s),isIpod:/iPod/.test(s),isIphone:/iPhone/.test(s)},o=!r.isBot&&n.querySelector&&n.json&&n.cors&&n.inputEvent&&n.cookies,{features:n,platform:r,isSupported:o}}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.Telemetry=function(){function e(e){this._addEventListeners=t(this._addEventListeners,this),this.flush=t(this.flush,this),this.instrument=t(this.instrument,this),this.config=e,this.dom=new exports.DomHelpers(e),this.dataSetId=Math.random().toString(16).substring(2),this.data={dataSetId:this.dataSetId,telemetryVersion:n,events:[]},this._addEventListeners(),this.config.LOGGER.debug("Telemetry init.")}var n;return n=2,e.prototype.instrument=function(t,e){var n;return null==e&&(e={}),n=exports.clone(e),n.name=t,n.timestamp=(new Date).getTime(),n.treatments=this.config.EXPERIMENTS.treatments,this.data.events.push(n),"SURVEY_SHOWN"===t&&(this.shouldAutoFlushOnWindowUnload=!0),this.config.LOGGER.debug("Telemetry instrument:",t,n)},e.prototype.flush=function(){if(this.config.TELEMETRY_URL&&this.data.events.length>0)return this.config.LOGGER.debug("Telemetry flush:",this.data),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.TELEMETRY_URL,body:{data:this.data},withCredentials:/^staging/.test(this.config.ENV),callback:function(t){return function(){return t.config.LOGGER.debug("Telemetry flushed.")}}(this)})},e.prototype._addEventListeners=function(){return this.dom.bindEvent(window,"beforeunload",function(t){return function(){if(t.instrument("WINDOW_BEFORE_UNLOAD"),t.shouldAutoFlushOnWindowUnload)return t.flush()}}(this))},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this._deserializeTimestampCookieValue=e(this._deserializeTimestampCookieValue,this),this._serializeTimestampCookieValue=e(this._serializeTimestampCookieValue,this),this._writeTimestampCookie=e(this._writeTimestampCookie,this),this._readTimestampCookie=e(this._readTimestampCookie,this),this.setLastRespondedTimestamp=e(this.setLastRespondedTimestamp,this),this.getLastRespondedTimestamp=e(this.getLastRespondedTimestamp,this),this.setLastSurveyedTimestamp=e(this.setLastSurveyedTimestamp,this),this.getLastSurveyedToken=e(this.getLastSurveyedToken,this),this.getLastSurveyedTimestamp=e(this.getLastSurveyedTimestamp,this),this.getSetFirstSeenTimestamp=e(this.getSetFirstSeenTimestamp,this),this.setFirstSeenTimestamp=e(this.setFirstSeenTimestamp,this),this.getFirstSeenTimestamp=e(this.getFirstSeenTimestamp,this),this.config=t}return t.prototype.getFirstSeenTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_FIRST_SEEN_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.setFirstSeenTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_FIRST_SEEN_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype.getSetFirstSeenTimestamp=function(t,e){return this.getFirstSeenTimestamp()||this.setFirstSeenTimestamp(t,e)},t.prototype.getLastSurveyedTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.getLastSurveyedToken=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=t?t.metadata.token:void 0},t.prototype.setLastSurveyedTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype.getLastRespondedTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_RESPONDED_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.setLastRespondedTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype._readTimestampCookie=function(t){var e;if(e=exports.Cookies.get(t),null!=e)return this._deserializeTimestampCookieValue(e)},t.prototype._writeTimestampCookie=function(t){var e;return e=this._serializeTimestampCookieValue(t.timestamp,t.metadata),exports.Cookies.set(t.name,e,{expires:t.expires,domain:this.config.COOKIE_DOMAIN})},t.prototype._serializeTimestampCookieValue=function(t,e){return[t.toString(),JSON.stringify(e||{})].join(":")},t.prototype._deserializeTimestampCookieValue=function(t){var e,n,i;return n=t.split(":"),i=n.shift(),e=n.join(":")||"{}",{timestamp:new Date(parseInt(i,10)).getTime(),metadata:JSON.parse(e)}},t}(),exports.StateManager=t}.call(this),function(){var t;t=function(){function t(t,e){null==e&&(e={}),this.config=t,this.treatments=e.treatments||{}}return t}(),exports.Experiments=t}.call(this),function(){exports.loadDelightedLibrary=function(t){var e,n,i,o,r,s,a,u,l;if(n=window[t.NAME],!n.isInitialized){if(n.isInitialized=!0,a=exports.qs.parse(location.search.substring(1)),t.IS_TEST=n.isTest||/test/.test(a.delighted),t.IS_DEBUG=n.isDebug||/debug/.test(a.delighted),/touch/.test(a.delighted)&&(t.FORCE_DISPLAY_STRATEGY="touch"),t.COOKIE_DOMAIN="."+exports.topdomain(location.href),"."===t.COOKIE_DOMAIN&&(t.COOKIE_DOMAIN=null),s=n.logLevel||t.LOG_LEVEL||(t.IS_DEBUG?"debug":"info"),t.LOGGER=exports.utils.buildLogger("[Delighted]",s),t.LOGGER.debug("Configuration:",t),!t.IS_TEST&&!t.ACTIVE)return void t.LOGGER.warn('Currently turned off. To turn it on, sign in to Delighted, go to Settings > Integrations > Web and click "Turn on". If you turned it on recently, you may need to wait a few minutes.');if(t.BROWSER_SUPPORT=exports.detectBrowserSupport(),t.LOGGER.debug("Browser support:",t.BROWSER_SUPPORT),t.EXPERIMENTS=new exports.Experiments(t,{treatments:exports.clone(t.OVERRIDE_EXPERIMENT_TREATMENTS||{})}),t.TELEMETRY=new exports.Telemetry(t),t.TELEMETRY.instrument("TELEMETRY_INIT",{browserSupport:t.BROWSER_SUPPORT,cookieDomain:t.COOKIE_DOMAIN,isTest:t.IS_TEST,isDebug:t.IS_DEBUG,logLevel:s}),!t.BROWSER_SUPPORT.isSupported)return void t.LOGGER.warn("Unsupported browser.");if(!t.IS_TEST&&!t.ENABLE_TOUCH_PLATFORMS&&t.BROWSER_SUPPORT.platform.isTouch)return void t.LOGGER.warn("Touch platforms not enabled.");for(t.STATE_MANAGER=new exports.StateManager(t),n.survey=function(e){var n;return t.LOGGER.debug("Survey called."),t.TELEMETRY.instrument("SURVEY_CALLED"),e=exports.clone(e||{}),null==e.initialDelay&&(e.initialDelay=t.DEFAULT_INITIAL_DELAY),null==e.recurringPeriod&&(e.recurringPeriod=t.DEFAULT_RECURRING_PERIOD),null==e.forceDisplay&&(e.forceDisplay=t.DEFAULT_FORCE_DISPLAY),null==e.minTimeOnPage&&(e.minTimeOnPage=t.DEFAULT_MIN_TIME_ON_PAGE),null==e.minTimeForDisplay&&(e.minTimeForDisplay=t.DEFAULT_MIN_TIME_FOR_DISPLAY),null==e.minSurveyInterval&&(e.minSurveyInterval=t.DEFAULT_MIN_SURVEY_INTERVAL),null==e.sampleFactor&&(e.sampleFactor=t.DEFAULT_SAMPLE_FACTOR),null==e.buttonAnimationDirection&&(e.buttonAnimationDirection="stars_five"===t.DEFAULT_SURVEY_TYPE.id?1:-1),null==e.disableShowAnimations&&(e.disableShowAnimations=!1),null==e.disableShowCommentAnimations&&(e.disableShowCommentAnimations=!1),null==e.disableScrollLock&&(e.disableScrollLock=!1),null==e.offsets&&(e.offsets={}),"m5KZudle4UrncwrN"===t.WRITE_KEY&&/file/.test(location.protocol)&&(e.initialDelay=t.DEFAULT_INITIAL_DELAY,
e.forceDisplay=t.DEFAULT_FORCE_DISPLAY,e.minTimeOnPage=60),n=exports.checkSurveyEligibility(t,e),t.LOGGER.debug("Survey options:",e),t.LOGGER.debug("Survey eligibility:",n),t.TELEMETRY.instrument("ELIGIBILITY_RESULT",{inputOpts:e,eligibility:n}),n.isEligible?(t.LOGGER.info("Survey will show because "+n.reason+"..."),exports.utils.timeout(n.delay,function(){return exports.showSurvey(t,n.params,{onShow:e.onShow,onShowComment:e.onShowComment,onHide:e.onHide,buttonAnimationDirection:e.buttonAnimationDirection,disableShowAnimations:e.disableShowAnimations||n.isRedisplay,disableShowCommentAnimations:e.disableShowCommentAnimations,disableScrollLock:e.disableScrollLock,offsets:e.offsets})})):t.LOGGER.info("Survey not shown because "+n.reason+".")},n.reset=function(){return t.LOGGER.debug("Reset called."),t.TELEMETRY.instrument("RESET_CALLED"),exports.Cookies.remove(t.COOKIE_FIRST_SEEN_TIMESTAMP,{domain:t.COOKIE_DOMAIN}),exports.Cookies.remove(t.COOKIE_LAST_SURVEYED_TIMESTAMP,{domain:t.COOKIE_DOMAIN})},(t.IS_TEST||/reset/.test(a.delighted))&&n.reset(),l=[],o=0,r=n.length;o<r;o++)u=n[o],i=u[0],e=u[1],t.LOGGER.debug("Dequeued:",i,e),l.push(n[i].apply(n,e));return l}}}.call(this);
              exports.loadDelightedLibrary({"ENV":"production","ACTIVE":false,"LOG_LEVEL":null,"NAME":"delighted","WRITE_KEY":"PupKOxNqQDCeohQs","PREVIEW_MODE":false,"DEFAULT_SURVEY_TYPE":{"id":"nps","groups":[{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"}],"groups_by_score":{"9":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},"10":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},"7":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},"8":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},"0":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"1":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"2":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"3":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"4":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"5":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"6":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"}},"chart_y_tick_values":[-100,-50,0,50,100],"chart_y_domain":[-125,125]},"DEFAULT_INITIAL_DELAY":0,"DEFAULT_RECURRING_PERIOD":null,"DEFAULT_FORCE_DISPLAY":false,"DEFAULT_MIN_TIME_ON_PAGE":2,"DEFAULT_MIN_TIME_FOR_DISPLAY":120,"DEFAULT_MIN_SURVEY_INTERVAL":2592000,"DEFAULT_SAMPLE_FACTOR":1.0,"PLAN_LIMIT_EXHAUSTED":false,"ENABLE_TOUCH_PLATFORMS":false,"OVERRIDE_EXPERIMENT_TREATMENTS":{},"COOKIE_LAST_SURVEYED_TIMESTAMP":"_delighted_lst","COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_LAST_RESPONDED_TIMESTAMP":"_delighted_lrt","COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_FIRST_SEEN_TIMESTAMP":"_delighted_fst","COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS":3650,"NEVER_FUTURE_TIMESTAMP":4618380874000,"NEVER_PAST_TIMESTAMP":-1693048870000,"RETURN_DELAY":21600,"SURVEY_URL":"https://web.delighted.com/t/dBXHzUz1","TELEMETRY_URL":"https://web.delighted.com/integrations/web/v1/telemetry/PupKOxNqQDCeohQs"});
            })();
          } catch(e) {
            if (console && console.error) { // :ALLOW_CONSOLE:
              var message;
              try { message = (e && e.message) || String(e); } catch(e) {};
              console.log("[Delighted] Error loading: ", message); // :ALLOW_CONSOLE:
            }
          }
